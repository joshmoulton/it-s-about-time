
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/lovable-uploads/2766797d-f12e-40af-bcc7-5fdee4ce7325.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>Weekly Wizdom - Home</title>
    <meta name="description" content="Join the #1 cross-asset Newsletter & Community. Get notified as soon as our analysts share new ideas, get market analysis and updates every week, and track everything in our proprietary dashboard." />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Weekly Wizdom - Home" />
    <meta property="og:description" content="Join the #1 cross-asset Newsletter & Community. Get notified as soon as our analysts share new ideas, get market analysis and updates every week, and track everything in our proprietary dashboard." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.weeklywizdom.com" />
    <meta property="og:image" content="/lovable-uploads/41a57ccc-0a24-4abd-89b1-3c41c3cc3d08.png" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Weekly Wizdom - Home" />
    <meta name="twitter:description" content="Join the #1 cross-asset Newsletter & Community. Get notified as soon as our analysts share new ideas, get market analysis and updates every week, and track everything in our proprietary dashboard." />
    <meta name="twitter:image" content="/lovable-uploads/41a57ccc-0a24-4abd-89b1-3c41c3cc3d08.png" />
    
    <!-- Essential preconnections only -->
    <link rel="preconnect" href="https://wrvvlmevpvcenauglcyz.supabase.co" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    
    <!-- Cache Control Headers -->
    <meta http-equiv="Cache-Control" content="public, max-age=31536000, immutable" />
    <meta http-equiv="Expires" content="Thu, 31 Dec 2025 23:59:59 GMT" />
    
    <!-- Preload critical resources only (handled by bundler) -->
    
    <!-- Critical CSS inlined for immediate render -->
    <style>
      /* Critical above-the-fold styles */
      html { font-family: system-ui, -apple-system, sans-serif; }
      body { margin: 0; background: #f5f7fa; color: #081426; line-height: 1.5; }
      #root { min-height: 100dvh; background: #f5f7fa; }
      
      /* Loading states */
      .hero-loading { 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        min-height: 100vh; 
        background: linear-gradient(135deg, #3355ff 0%, #4c6fff 100%);
      }
      .loading-spinner {
        width: 2rem; height: 2rem;
        border: 2px solid transparent;
        border-top: 2px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin { to { transform: rotate(360deg); } }
      
      /* Critical layout styles */
      .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
      .btn-primary { 
        background: #3355ff; 
        color: white; 
        padding: 0.75rem 2rem; 
        border-radius: 0.75rem; 
        text-decoration: none; 
        display: inline-block;
        font-weight: 500;
        transition: background 0.2s;
      }
      .btn-primary:hover { background: #2844ff; }
      
      /* Hero section critical styles - Use dvh for mobile */
      .hero-gradient {
        background: linear-gradient(135deg, #3355ff 0%, #4c6fff 100%);
        min-height: 100dvh;
        display: flex;
        align-items: center;
      }
      
      /* Skip link for accessibility */
      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
      .sr-only:focus { position: static; width: auto; height: auto; padding: 0.5rem 1rem; margin: 0; overflow: visible; clip: auto; white-space: normal; }
    </style>
    
    <!-- Self-Hosted Fonts from Supabase Storage -->
    <link rel="preload" href="https://wrvvlmevpvcenauglcyz.supabase.co/storage/v1/object/public/Fonts/merriweather-v32-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="https://wrvvlmevpvcenauglcyz.supabase.co/storage/v1/object/public/Fonts/montserrat-v30-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
    
    <style>
      @font-face {
        font-family: 'Merriweather';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url('https://wrvvlmevpvcenauglcyz.supabase.co/storage/v1/object/public/Fonts/merriweather-v32-latin-regular.woff2') format('woff2');
      }
      
      @font-face {
        font-family: 'Montserrat';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: url('https://wrvvlmevpvcenauglcyz.supabase.co/storage/v1/object/public/Fonts/montserrat-v30-latin-regular.woff2') format('woff2');
      }
    </style>

    <!-- Security headers optimized for Whop integration -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="no-referrer-when-downgrade">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Theme color to prevent white flash -->
    <meta name="theme-color" content="#3355ff">
    
    <!-- Preload logo for instant loader -->
    <link rel="preload" as="image" href="/lovable-uploads/2766797d-f12e-40af-bcc7-5fdee4ce7325.png" fetchpriority="high">
  </head>
  <body>
    <!-- Minimal instant loader -->
    <style>
      #instant-loader{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#3355ff;z-index:9999}
      #instant-loader .logo{width:96px;height:auto}
      .fade-out{opacity:0;transition:opacity 300ms ease-out}
    </style>
    
    <div id="instant-loader">
      <img src="/lovable-uploads/2766797d-f12e-40af-bcc7-5fdee4ce7325.png" alt="Weekly Wizdom" class="logo" fetchpriority="high" decoding="async">
    </div>
    
    <div id="root"></div>

    <!-- Disable Service Worker and clear caches on preview domains only -->
    <script>
      (function() {
        if (location.hostname.includes('id-preview--')) {
          if ('serviceWorker' in navigator) {
            try {
              var hadController = !!navigator.serviceWorker.controller;
              navigator.serviceWorker.getRegistrations()
                .then(function(regs){ return Promise.all(regs.map(function(r){ return r.unregister(); })); })
                .then(function(){
                  if ('caches' in window) {
                    caches.keys().then(function(keys){ keys.forEach(function(k){ caches.delete(k); }); }).catch(function(){});
                  }
                  // If the page was controlled, reload once to drop the old controller
                  if (hadController) {
                    try { sessionStorage.setItem('sw_cleared_once','1'); } catch(e){}
                    if (!sessionStorage.getItem('sw_reloaded')) {
                      try { sessionStorage.setItem('sw_reloaded','1'); } catch(e){}
                      location.reload();
                    }
                  }
                })
                .catch(function(){});
            } catch (e) {}
          }
        }
      })();
    </script>

    <!-- App entry -->
    <script type="module" src="/src/main.tsx"></script>

    <!-- Optimized performance script -->
    <script defer>
      (function(){
        try { 
          if ('fonts' in document) { 
            document.fonts.load('400 1em Merriweather');
            document.fonts.load('700 1em Merriweather');
            document.fonts.load('400 1em Montserrat');
            document.fonts.load('500 1em Montserrat');
            document.fonts.load('600 1em Montserrat');
          }
          // Add loaded class when fonts are ready
          if (document.fonts && document.fonts.ready) {
            document.fonts.ready.then(() => {
              document.documentElement.classList.add('fonts-loaded');
            });
          }
        } catch(e){}
      })();
    </script>
  </body>
</html>
